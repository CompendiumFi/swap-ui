(this["webpackJsonp@project-serum/swap-ui-example"]=this["webpackJsonp@project-serum/swap-ui-example"]||[]).push([[0],{254:function(e,t,n){},259:function(e,t){},260:function(e,t){},262:function(e,t){},272:function(e,t){},290:function(e,t){},291:function(e,t){},315:function(e,t){},316:function(e,t){},323:function(e,t){},336:function(e,t){},338:function(e,t){},355:function(e,t){},362:function(e,t){},371:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(31),i=n.n(a),c=(n(254),n(1)),s=n.n(c),u=n(4),l=n(12),d=n(14),p=n(125),b=n(57),f=n(35),j=n(36),m=n(17),v=n(184),x=n(410),h=n(428),g=n(438),O=n(51),w=n(230),y=n(27),k=n(238),S=(n(314),n(232)),C=n(236),M=n(437),A=n(16),T=n(69),P=n(58),F=new y.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),K=new y.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),E=new y.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),N=new y.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),B=new y.PublicKey("6a9wpsZpZGxGhFVSQBpcTNjNjytdbSA1iUw1A5KNDxPw"),q=new y.PublicKey("FVsXUnbhifqJ4LiXQEbpUtXVdB8T5ADLKqSs5t1oc54F"),W=new y.PublicKey("6nGMps9VfDjkKEwYjdSNqN1ToXkLae4VsN49fzBiDFBd"),I=new y.PublicKey("9w97GdWUYYaamGwdKMKZgGzPduZJkiFizq4rz5CPXRv2"),L=new y.PublicKey("4v6e6vNXAaEunrvbqkYnKwbaWfck8a2KVR4uRAVXxVwC"),R=n(74),z=n(9),D=o.a.createContext(null),G="wrapped-sollet",_="wormhole";function U(e){var t=Object(r.useMemo)((function(){return e.tokenList.filterByClusterSlug("mainnet-beta").getList()}),[e.tokenList]),n=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){e.set(t.address,t)})),e}),[t]),o=Object(r.useMemo)((function(){var e=t.filter((function(e){var t,n,r=(null===(t=e.extensions)||void 0===t?void 0:t.serumV3Usdt)||(null===(n=e.extensions)||void 0===n?void 0:n.serumV3Usdc),o="So11111111111111111111111111111111111111112"===e.address;return r&&!o}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t,n]),a=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(G)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),i=Object(m.a)(a,2),c=i[0],s=i[1],u=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(_)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),l=Object(m.a)(u,2),d=l[0],p=l[1];return Object(z.jsx)(D.Provider,{value:{tokenMap:n,wormholeMap:p,solletMap:s,swappableTokens:o,swappableTokensWormhole:d,swappableTokensSollet:c},children:e.children})}function V(){var e=Object(r.useContext)(D);if(null===e)throw new Error("Context not available");return e}function X(){return V().tokenMap}var Y=n(22),Z=n(91);function J(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=ae.get(t.toString()))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,ee("GET","coins/sol/".concat(t.toString()));case 5:return r=e.sent,n=Object(Y.a)(Object(Y.a)({},r),{},{splMint:new y.PublicKey(r.splMint)}),ae.set(t.toString(),n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,n,r,o){return $.apply(this,arguments)}function $(){return($=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(i=ie.get(o.toString()))){e.next=3;break}return e.abrupt("return",i);case 3:return e.next=5,t.getAccountInfo(o);case 5:if(null!==e.sent){e.next=13;break}return ie.set(o.toString(),!1),ee("POST","wormhole/pool/".concat(a.ticker,"/").concat(o.toString(),"/").concat(n.toString(),"/").concat(r.toString())).catch(console.error),e.abrupt("return",!1);case 13:return ie.set(o.toString(),!0),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t,n){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(s.a.mark((function e(t,n,r){var o,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:o={},method:t},"GET"===t?a.cache="no-cache":r&&(o["Content-Type"]="application/json",a.body=JSON.stringify(r)),e.next=5,fetch("https://swap.sollet.io/api/".concat(n),a);case 5:return i=e.sent,e.next=8,ne(i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if((n=e.sent).success){e.next=5;break}throw new oe(n.error,t.status);case 5:return e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e,r){var o;return Object(l.a)(this,n),(o=t.call(this,e)).name=void 0,o.status=void 0,o.name="SwapApiError",o.status=r,o}return n}(Object(Z.a)(Error)),ae=new Map,ie=new Map,ce=n(24),se=n(3),ue=n(20);function le(){return(le=Object(u.a)(s.a.mark((function e(t,n){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(n),e.next=3,t._rpcRequest("getProgramAccounts",[P.TOKEN_PROGRAM_ID.toBase58(),{commitment:t.commitment,filters:r}]);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+o.error.message);case 6:return e.abrupt("return",o.result.map((function(e){var t=e.pubkey,n=e.account,r=n.data,o=n.executable,a=n.owner,i=n.lamports;return{publicKey:new y.PublicKey(t),accountInfo:{data:ue.decode(r),executable:o,owner:new y.PublicKey(a),lamports:i}}})).filter((function(e){var t=e.accountInfo;return r.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=ue.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})).map((function(e){return{publicKey:e.publicKey,account:pe(e.accountInfo.data)}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de=se.struct([se.blob(32,"mint"),se.blob(32,"owner"),se.nu64("amount"),se.blob(93)]);function pe(e){var t=de.decode(e),n=t.mint,r=t.owner,o=t.amount;return{mint:new y.PublicKey(n),owner:new y.PublicKey(r),amount:new O.BN(o)}}function be(e){return[{memcmp:{offset:de.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:de.span}]}var fe=o.a.createContext(null);function je(e){var t=e.provider,n=Object(r.useState)(0),o=Object(m.a)(n,2)[1];return Object(r.useEffect)((function(){if(!t.wallet.publicKey)return he.length=0,void o((function(e){return e+1}));(function(e,t){return le.apply(this,arguments)})(t.connection,t.wallet.publicKey).then((function(e){e&&(he.push.apply(he,Object(ce.a)(e)),o((function(e){return e+1})))}))}),[t.wallet.publicKey,t.connection]),Object(z.jsx)(fe.Provider,{value:{provider:t},children:e.children})}function me(){var e=Object(r.useContext)(fe);if(null===e)throw new Error("Context not available");return e}function ve(e){var t=me().provider,n=Object(r.useState)(0),o=Object(m.a)(n,2)[1],a=he.filter((function(t){return e&&t.account.mint.equals(e)}));a.sort((function(e,t){return e.account.amount>t.account.amount?-1:e.account.amount<t.account.amount?1:0}));var i=a[0];if(Object(r.useEffect)((function(){var e;return i&&(e=t.connection.onAccountChange(i.publicKey,(function(e){var t=pe(e.data);if(t.amount!==i.account.amount){var n=he.indexOf(i);A.ok(n>=0),he[n].account=t,o((function(e){return e+1}))}}))),function(){e&&t.connection.removeAccountChangeListener(e)}}),[t.connection,i]),void 0!==e)return 0===a.length?null:i}function xe(e){var t=me().provider,n=Object(T.a)(Object(u.a)(s.a.mark((function n(){var r,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!ge.get(e.toString())){n.next=4;break}return n.abrupt("return",ge.get(e.toString()));case 4:return r=new P.Token(t.connection,e,P.TOKEN_PROGRAM_ID,new y.Account),o=r.getMintInfo(),ge.set(e.toString(),o),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)}))),[t.connection,e]);if(n.result)return n.result}var he=[],ge=new Map,Oe=.9978,we=o.a.createContext(null);function ye(e){var t=Object(r.useState)(new Map),n=Object(m.a)(t,2),o=n[0],a=n[1],i=e.swapClient,c=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map(o),(i=null===(n=r.get(t.market.toString()))||void 0===n?void 0:n.filter((function(e){return!e.address.equals(t.address)})))&&i.length>0?r.set(t.market.toString(),i):r.delete(t.market.toString()),a(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i.program.provider.wallet.publicKey?R.OpenOrders.findForOwner(i.program.provider.connection,i.program.provider.wallet.publicKey,F).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o,c,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Map,r=new Set,t.forEach((function(e){r.add(e.market.toString()),n.get(e.market.toString())?n.get(e.market.toString()).push(e):n.set(e.market.toString(),[e])})),!(r.size>100)){e.next=5;break}throw new Error("Too many markets. Please file an issue to update this");case 5:return e.next=7,O.utils.rpc.getMultipleAccounts(i.program.provider.connection,Array.from(r.values()).map((function(e){return new y.PublicKey(e)})));case 7:if(o=e.sent,c=o.map((function(e){return{publicKey:null===e||void 0===e?void 0:e.publicKey,account:new R.Market(R.Market.getLayout(F).decode(null===e||void 0===e?void 0:e.account.data),-1,-1,i.program.provider.opts,F)}})),a(n),!((u=Array.from(new Set(c.map((function(e){return[e.account.baseMintAddress.toString(),e.account.quoteMintAddress.toString()]})).flat()).values()).map((function(e){return new y.PublicKey(e)}))).length>100)){e.next=13;break}throw new Error("Too many mints. Please file an issue to update this");case 13:return e.next=15,O.utils.rpc.getMultipleAccounts(i.program.provider.connection,u);case 15:l=e.sent,d=l.map((function(e){var t,n,r=P.MintLayout.decode(e.account.data);return t=e.publicKey,n=r,ge.set(t.toString(),new Promise((function(e){return e(n)}))),{publicKey:e.publicKey,mintInfo:r}})),c.forEach((function(e){var t=d.filter((function(t){return t.publicKey.equals(e.account.baseMintAddress)}))[0],n=d.filter((function(t){return t.publicKey.equals(e.account.baseMintAddress)}))[0];A.ok(t&&n),e.account._baseSplTokenDecimals=t.mintInfo.decimals,e.account._quoteSplTokenDecimals=n.mintInfo.decimals,Re.set(e.publicKey.toString(),new Promise((function(t){return t(e.account)})))}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):a(new Map)}),[i.program.provider.connection,i.program.provider.wallet.publicKey,i.program.provider.opts]),Object(z.jsx)(we.Provider,{value:{openOrders:o,closeOpenOrders:c,swapClient:i},children:e.children})}function ke(){var e=Object(r.useContext)(we);if(null===e)throw new Error("Context not available");return e}function Se(){return ke().openOrders}function Ce(e){var t=ke().swapClient,n=Object(T.a)(Object(u.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!Re.get(e.toString())){n.next=4;break}return n.abrupt("return",Re.get(e.toString()));case 4:return r=new Promise(function(){var n=Object(u.a)(s.a.mark((function n(r){var o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.Market.load(t.program.provider.connection,e,t.program.provider.opts,F);case 2:o=n.sent,r(o);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Re.set(e.toString(),r),n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)}))),[t.program.provider.connection,e]);if(n.result)return n.result}function Me(e){var t=function(e){var t=ke().swapClient,n=Ce(e),o=Object(r.useState)(0),a=Object(m.a)(o,2),i=a[0],c=a[1],l=Object(T.a)(Object(u.a)(s.a.mark((function r(){var o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&n){r.next=2;break}return r.abrupt("return",void 0);case 2:if(!Le.get(e.toString())){r.next=4;break}return r.abrupt("return",Le.get(e.toString()));case 4:return o=new Promise(function(){var e=Object(u.a)(s.a.mark((function e(r){var o,a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadBids(t.program.provider.connection),n.loadAsks(t.program.provider.connection)]);case 2:o=e.sent,a=Object(m.a)(o,2),i=a[0],c=a[1],r({bids:i,asks:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Le.set(e.toString(),o),r.abrupt("return",o);case 7:case"end":return r.stop()}}),r)}))),[i,t.program.provider.connection,e,n]);if(Object(r.useEffect)((function(){var e;return(null===n||void 0===n?void 0:n.bidsAddress)&&(e=t.program.provider.connection.onAccountChange(null===n||void 0===n?void 0:n.bidsAddress,function(){var e=Object(u.a)(s.a.mark((function e(t){var r,o,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R.Orderbook.decode(n,t.data),e.next=3,Le.get(n.address.toString());case 3:o=e.sent,a=null===o||void 0===o?void 0:o.bids.items(!0).next().value,i=r.items(!0).next().value,o&&a&&i&&a.price!==i.price&&(o.bids=r,c((function(e){return e+1})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),function(){e&&t.program.provider.connection.removeAccountChangeListener(e)}}),[n,null===n||void 0===n?void 0:n.bidsAddress,t.program.provider.connection]),Object(r.useEffect)((function(){var e;return(null===n||void 0===n?void 0:n.asksAddress)&&(e=t.program.provider.connection.onAccountChange(null===n||void 0===n?void 0:n.asksAddress,function(){var e=Object(u.a)(s.a.mark((function e(t){var r,o,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R.Orderbook.decode(n,t.data),e.next=3,Le.get(n.address.toString());case 3:o=e.sent,a=null===o||void 0===o?void 0:o.asks.items(!1).next().value,i=r.items(!1).next().value,o&&a&&i&&a.price!==i.price&&(o.asks=r,c((function(e){return e+1})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),function(){e&&t.program.provider.connection.removeAccountChangeListener(e)}}),[n,null===n||void 0===n?void 0:n.bidsAddress,t.program.provider.connection]),l.result)return l.result}(e);if(void 0!==t){var n=t.bids.items(!0).next().value,o=t.asks.items(!1).next().value;if(!n)return{bestOffer:o.price};if(!o)return{bestBid:n.price};var a=(n.price+o.price)/2;return{bestBid:n.price,bestOffer:o.price,mid:a}}}function Ae(e,t){var n=Te(e,t);return null===n?null:n.markets}function Te(e,t){var n=ke().swapClient,r=V(),o=r.wormholeMap,a=r.solletMap,i=Object(T.a)(Object(u.a)(s.a.mark((function r(){var i,c,u,l,d;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ke(n.program.provider.connection,e,t,o,a);case 2:if(null===(i=r.sent)){r.next=6;break}return c=Object(m.a)(i,2),u=c[0],l=c[1],r.abrupt("return",{markets:[u],kind:l});case 6:if(null!==(d=n.route(e,t))){r.next=9;break}return r.abrupt("return",null);case 9:return"usdx",r.abrupt("return",{markets:d,kind:"usdx"});case 11:case"end":return r.stop()}}),r)}))),[e,t,n]);return i.result?i.result:null}var Pe=new Map([[Fe(q,E),W],[Fe(I,N),L]]);function Fe(e,t){var n=e<t?[e,t]:[t,e],r=Object(m.a)(n,2),o=r[0],a=r[1];return o.toString()+a.toString()}function Ke(e,t,n,r,o){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=Ne(n,r))){e.next=3;break}return e.abrupt("return",[i,"wormhole-native"]);case 3:return e.next=5,Be(t,n,r,o,a);case 5:if(null!==(i=e.sent)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",[i,"wormhole-sollet"]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t){var n;return null!==(n=Pe.get(Fe(e,t)))&&void 0!==n?n:null}function Be(e,t,n,r,o){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i,c,u,l,d,p,b,f,j,v,x,h,g,O,w,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.get(n.toString()),c=void 0!==i,u=o.get(r.toString()),l=void 0!==u,d=a.get(n.toString()),p=void 0!==d,b=a.get(r.toString()),f=void 0!==b,!c&&!l||c===l){e.next=28;break}if(!p&&!f||p===f){e.next=28;break}return v=p?n:r,x=c?[n,i]:[r,u],h=Object(m.a)(x,2),g=h[0],O=h[1],e.next=14,J(v);case 14:if((w=e.sent).erc20Contract===(null===(j=O.extensions)||void 0===j?void 0:j.address)){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,We(v,g);case 19:if(null!==(y=e.sent)){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,H(t,v,g,y,w);case 24:if(e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",y);case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(u.a)(s.a.mark((function e(t,n){var r,o,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=i.length>2&&void 0!==i[2]?i[2]:0)>99)){e.next=4;break}return console.log("Swap market version cannot be greater than 99"),e.abrupt("return",null);case 4:if(!(r<0)){e.next=7;break}return console.log("Version cannot be less than zero"),e.abrupt("return",null);case 7:return o=function(e){return e<=99?"0".concat(e).slice(-2):e},a=t.toString().slice(0,15)+n.toString().slice(0,15)+o(r),e.next=11,y.PublicKey.createWithSeed(B,a,F);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=new Map,Re=new Map,ze=o.a.createContext(null);function De(e){var t,n,o,a,i=Object(r.useState)(null!==(t=e.fromMint)&&void 0!==t?t:K),c=Object(m.a)(i,2),s=c[0],u=c[1],l=Object(r.useState)(null!==(n=e.toMint)&&void 0!==n?n:E),d=Object(m.a)(l,2),p=d[0],b=d[1],f=Object(r.useState)(null!==(o=e.fromAmount)&&void 0!==o?o:0),j=Object(m.a)(f,2),v=j[0],x=j[1],h=Object(r.useState)(null!==(a=e.toAmount)&&void 0!==a?a:0),g=Object(m.a)(h,2),O=g[0],w=g[1],y=Object(r.useState)(!1),k=Object(m.a)(y,2),S=k[0],C=k[1],M=Object(r.useState)(!1),T=Object(m.a)(M,2),P=T[0],F=T[1],N=Object(r.useState)(.5),B=Object(m.a)(N,2),q=B[0],W=B[1],I=Object(r.useState)(null),L=Object(m.a)(I,2),R=L[0],D=L[1],G=Ue(s,p,R),_=e.referral;A.ok(q>=0);return Object(z.jsx)(ze.Provider,{value:{fromMint:s,setFromMint:u,toMint:p,setToMint:b,fromAmount:v,setFromAmount:function(e){if(void 0===G)throw new Error("Fair price not found");x(e),w(Oe*(e/G))},toAmount:O,setToAmount:function(e){if(void 0===G)throw new Error("Fair price not found");w(e),x(e*G/Oe)},swapToFromMints:function(){var e=s,t=v,n=O;u(p),b(e),x(n),w(t)},slippage:q,setSlippage:W,fairOverride:R,setFairOverride:D,isClosingNewAccounts:S,isStrict:P,setIsStrict:F,setIsClosingNewAccounts:C,referral:_},children:e.children})}function Ge(){var e=Object(r.useContext)(ze);if(null===e)throw new Error("Context not available");return e}function _e(){var e=Ge(),t=e.fairOverride;return Ue(e.fromMint,e.toMint,t)}function Ue(e,t,n){var r=function(e,t){var n=Ae(e,t),r=Me(n?n[0]:void 0),o=Ce(n?n[0]:void 0),a=Me(n?n[1]:void 0);if(null!==n){if(1===n.length&&void 0!==r){if(void 0===o)return;return(null===o||void 0===o?void 0:o.baseMintAddress.equals(e))?r.bestBid&&1/r.bestBid:r.bestOffer&&r.bestOffer}if(void 0!==r&&void 0!==r.bestBid&&void 0!==a&&void 0!==a.bestOffer)return a.bestOffer/r.bestBid}}(e,t);return null===n?r:n}var Ve=n(434),Xe=n(158),Ye=n(47),Ze=n(442),Je=n(435),Qe=n(436),He=n(443),$e=n(411),et=n(415),tt=n(414),nt=n(416),rt=n(439),ot=n(417),at=n(374),it=Object(x.a)((function(e){return{dialogContent:{padding:0},textField:{marginBottom:"8px"},tab:{minWidth:"134px"},tabSelected:{color:e.palette.primary.contrastText,fontWeight:700,backgroundColor:e.palette.primary.main,borderRadius:"10px"},tabIndicator:{opacity:0}}}));function ct(e){var t=e.open,n=e.onClose,o=e.setMint,a=Object(r.useState)(0),i=Object(m.a)(a,2),c=i[0],s=i[1],u=Object(r.useState)(""),l=Object(m.a)(u,2),d=l[0],p=l[1],b=d.toLowerCase(),f=it(),j=function(){var e=V();return{swappableTokens:e.swappableTokens,swappableTokensWormhole:e.swappableTokensWormhole,swappableTokensSollet:e.swappableTokensSollet}}(),v=j.swappableTokens,x=j.swappableTokensSollet,h=j.swappableTokensWormhole,g=0===c?v:1===c?h:x,O=""===d?g:g.filter((function(e){return e.symbol.toLowerCase().startsWith(b)||e.name.toLowerCase().startsWith(b)||e.address.toLowerCase().startsWith(b)}));return Object(z.jsxs)(He.a,{open:t,onClose:n,scroll:"paper",PaperProps:{style:{borderRadius:"10px",width:"420px"}},children:[Object(z.jsxs)($e.a,{style:{fontWeight:"bold"},children:[Object(z.jsx)(Xe.a,{variant:"h6",style:{paddingBottom:"16px"},children:"Select a token"}),Object(z.jsx)(Ze.a,{className:f.textField,placeholder:"Search name",value:d,fullWidth:!0,variant:"outlined",onChange:function(e){return p(e.target.value)}})]}),Object(z.jsx)(et.a,{className:f.dialogContent,dividers:!0,children:Object(z.jsx)(tt.a,{disablePadding:!0,children:O.map((function(e){return Object(z.jsx)(st,{tokenInfo:e,onClick:function(e){o(e),n()}},e.address)}))})}),Object(z.jsx)(nt.a,{children:Object(z.jsxs)(rt.a,{value:c,onChange:function(e,t){return s(t)},classes:{indicator:f.tabIndicator},children:[Object(z.jsx)(ot.a,{value:0,className:f.tab,classes:{selected:f.tabSelected},label:"Main"}),Object(z.jsx)(ot.a,{value:1,className:f.tab,classes:{selected:f.tabSelected},label:"Wormhole"}),Object(z.jsx)(ot.a,{value:2,className:f.tab,classes:{selected:f.tabSelected},label:"Sollet"})]})})]})}function st(e){var t=e.tokenInfo,n=e.onClick,r=new y.PublicKey(t.address);return Object(z.jsxs)(at.a,{button:!0,onClick:function(){return n(r)},style:{padding:"10px 20px"},children:[Object(z.jsx)($t,{mint:r,style:{width:"30px",borderRadius:"15px"}}),Object(z.jsx)(ut,{tokenInfo:t})]})}function ut(e){var t=e.tokenInfo;return Object(z.jsxs)("div",{style:{marginLeft:"16px"},children:[Object(z.jsx)(Xe.a,{style:{fontWeight:"bold"},children:null===t||void 0===t?void 0:t.symbol}),Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontSize:"14px"},children:null===t||void 0===t?void 0:t.name})]})}var lt=n(418),dt=n(445),pt=n(430),bt=n(431),ft=n(432),jt=n(446),mt=n(429),vt=n(84),xt=n.n(vt),ht=n(420),gt=n(373),Ot=n(421),wt=n(422),yt=n(423),kt=n(424),St=n(425),Ct=n(426),Mt=n(440),At=n(427),Tt=n(419),Pt=Object(x.a)((function(e){return{table:{},closeAccount:{color:e.palette.error.main}}}));function Ft(e){var t=e.open,n=e.onClose;return Object(z.jsxs)(He.a,{maxWidth:"lg",open:t,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:[Object(z.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(z.jsx)(lt.a,{onClick:n,style:{padding:10},children:Object(z.jsx)(Tt.a,{})})}),Object(z.jsx)(et.a,{style:{paddingTop:0},children:Object(z.jsx)(Kt,{})})]})}function Kt(){var e=Pt(),t=Se(),n=Object(r.useMemo)((function(){return Array.from(t.entries()).map((function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];return[new y.PublicKey(n),r]}))}),[t]);return Object(z.jsx)(ht.a,{component:gt.a,elevation:0,children:Object(z.jsxs)(Ot.a,{className:e.table,"aria-label":"simple table",children:[Object(z.jsx)(wt.a,{children:Object(z.jsxs)(yt.a,{children:[Object(z.jsx)(kt.a,{children:"Market"}),Object(z.jsx)(kt.a,{align:"center",children:"Open Orders Account"}),Object(z.jsx)(kt.a,{align:"center",children:"Base Used"}),Object(z.jsx)(kt.a,{align:"center",children:"Base Free"}),Object(z.jsx)(kt.a,{align:"center",children:"Quote Used"}),Object(z.jsx)(kt.a,{align:"center",children:"Quote Free"}),Object(z.jsx)(kt.a,{align:"center",children:"Settle"}),Object(z.jsx)(kt.a,{align:"center",children:"Close"})]})}),Object(z.jsx)(St.a,{children:n.map((function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(z.jsx)(Et,{market:n,openOrders:r},n.toString())}))})]})})}function Et(e){var t,n,o=e.market,a=e.openOrders,i=Pt(),c=Object(r.useState)(a[0]),l=Object(m.a)(c,2),d=l[0],p=l[1];Object(r.useEffect)((function(){p(a[0])}),[a]);var b=ke(),f=b.swapClient,j=b.closeOpenOrders,v=Ce(o),x=X(),g=xe(null===v||void 0===v?void 0:v.baseMintAddress),O=xe(null===v||void 0===v?void 0:v.quoteMintAddress),w=ve(null===v||void 0===v?void 0:v.baseMintAddress),y=ve(null===v||void 0===v?void 0:v.quoteMintAddress),k=v?null===(t=x.get(null===v||void 0===v?void 0:v.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",S=v?null===(n=x.get(null===v||void 0===v?void 0:v.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-",C=k&&S?"".concat(k," / ").concat(S):o.toString(),M=d.baseTokenFree.toNumber()+d.quoteTokenFree.toNumber()===0,A=d.baseTokenTotal.toNumber()+d.quoteTokenTotal.toNumber()!==0,T=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}throw new Error("Market client not found");case 2:if(w&&y){e.next=4;break}throw new Error("Base or quote wallet not found");case 4:return void 0,e.next=7,v.makeSettleFundsTransaction(f.program.provider.connection,d,w.publicKey,y.publicKey,undefined);case 7:return t=e.sent,n=t.transaction,r=t.signers,e.next=12,f.program.provider.send(n,r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.program.rpc.closeAccount({accounts:{openOrders:d.address,authority:f.program.provider.wallet.publicKey,destination:f.program.provider.wallet.publicKey,market:v.address,dexProgram:F}});case 2:j(d);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)(yt.a,{children:[Object(z.jsx)(kt.a,{component:"th",scope:"row",children:Object(z.jsx)(Xe.a,{children:Object(z.jsx)(Ct.a,{href:"https://dex.projectserum.com/#/market/".concat(o.toString()),target:"_blank",rel:"noopener",children:C})})}),Object(z.jsx)(kt.a,{align:"center",children:Object(z.jsx)(Mt.a,{value:d.address.toString(),onChange:function(e){return p(a.filter((function(t){return t.address.toString()===e.target.value}))[0])},children:a.map((function(e){return Object(z.jsx)(At.a,{value:e.address.toString(),children:e.address.toString()},e.address.toString())}))})}),Object(z.jsx)(kt.a,{align:"center",children:Nt(g,d.baseTokenTotal.sub(d.baseTokenFree))}),Object(z.jsx)(kt.a,{align:"center",children:Nt(g,d.baseTokenFree)}),Object(z.jsx)(kt.a,{align:"center",children:Nt(O,d.quoteTokenTotal.sub(d.quoteTokenFree))}),Object(z.jsx)(kt.a,{align:"center",children:Nt(O,d.quoteTokenFree)}),Object(z.jsx)(kt.a,{align:"center",children:Object(z.jsx)(h.a,{color:"primary",disabled:M,onClick:T,children:"Settle"})}),Object(z.jsx)(kt.a,{align:"center",children:Object(z.jsx)(h.a,{disabled:A,onClick:P,className:i.closeAccount,children:"Close"})})]},o.toString())}function Nt(e,t){return e?(t.toNumber()/Math.pow(10,e.decimals)).toFixed(e.decimals):t.toNumber().toString()}var Bt=Object(x.a)((function(e){return{tab:{width:"50%"},table:{},settingsButton:{padding:0,color:e.palette.primary.main},closeAccountSwitchLabel:{color:e.palette.text.secondary},fairAutoSelected:{backgroundColor:e.palette.primary.main,padding:"3px 5px",borderRadius:"10px",color:e.palette.primary.contrastText,fontWeight:700},fairAuto:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:e.palette.secondary.main,padding:"3px 5px",borderRadius:"10px",boxShadow:"none"}}}));function qt(){var e=Bt();return Object(z.jsx)(xt.a,{variant:"popover",children:function(t){return Object(z.jsxs)("div",{children:[Object(z.jsx)(lt.a,Object(Y.a)(Object(Y.a)({},Object(vt.bindTrigger)(t)),{},{className:e.settingsButton,children:Object(z.jsx)(mt.a,{})})),Object(z.jsx)(dt.a,Object(Y.a)(Object(Y.a)({},Object(vt.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px",boxShadow:"0px 0px 30px 5px rgba(0,0,0,0.075)"}},children:Object(z.jsx)(Wt,{})}))]})}})}function Wt(){var e=Bt(),t=Ge(),n=t.slippage,o=t.setSlippage,a=t.fairOverride,i=t.setFairOverride,c=Object(r.useState)(!1),s=Object(m.a)(c,2),u=s[0],l=s[1],d=_e(),p=ke().swapClient;return Object(z.jsxs)("div",{style:{padding:"15px",width:"305px"},children:[Object(z.jsx)(Xe.a,{style:{fontWeight:"bold"},children:"Settings"}),Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{style:{marginTop:"10px"},children:[Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontSize:"12px"},children:"Slippage tolerance"}),Object(z.jsx)(Ze.a,{type:"number",placeholder:"Error tolerance percentage",value:n,onChange:function(e){return t=parseFloat(e.target.value),void o(!t||t<0?0:t);var t},style:{display:"flex",justifyContent:"center",flexDirection:"column"},InputProps:{endAdornment:Object(z.jsx)(pt.a,{position:"end",children:"%"})}})]}),Object(z.jsxs)("div",{style:{marginTop:"10px"},children:[Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontSize:"12px"},children:"Fair price"}),Object(z.jsxs)("div",{style:{display:"flex"},children:[Object(z.jsx)(Ze.a,{type:"number",placeholder:"Fair price override",value:d,onChange:function(e){return i(parseFloat(e.target.value))},style:{marginRight:"10px",flex:1,display:"flex",justifyContent:"center",flexDirection:"column"},disabled:null===a}),Object(z.jsx)(h.a,{component:"div",variant:"contained",onClick:function(){void 0!==d?i(null===a?d:null):console.error("Fair is undefined")},className:null===a?e.fairAutoSelected:e.fairAuto,children:"Auto"})]})]}),Object(z.jsx)("div",{style:{margin:"10px 0px"},children:Object(z.jsx)(It,{})}),Object(z.jsx)(h.a,{variant:"contained",fullWidth:!0,disabled:null===p.program.provider.wallet.publicKey,onClick:function(){return l(!0)},children:"Manage Dex Accounts"})]}),Object(z.jsx)(Ft,{open:u,onClose:function(){return l(!1)}})]})}function It(){var e=Bt(),t=Ge(),n=t.isClosingNewAccounts,r=t.setIsClosingNewAccounts;return Object(z.jsx)(bt.a,{style:{display:"none"},row:!0,children:Object(z.jsx)(ft.a,{classes:{label:e.closeAccountSwitchLabel},labelPlacement:"start",style:{display:"flex",justifyContent:"space-between",marginLeft:0,width:"100%"},control:Object(z.jsx)(jt.a,{checked:n,onChange:function(){return r(!n)},color:"primary"}),label:"Close new accounts"})})}var Lt=n(433),Rt=Object(x.a)((function(){return{infoLabel:{marginTop:"20px",marginBottom:"20px",display:"flex",justifyContent:"flex-end",alignItems:"center"},infoButton:{marginLeft:"5px",padding:0,fontSize:"14px"}}}));function zt(){var e=Rt(),t=Ge(),n=t.fromMint,r=t.toMint,o=xe(n),a=_e(),i=X(),c=i.get(n.toString()),s=i.get(r.toString());return Object(z.jsxs)("div",{className:e.infoLabel,children:[Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontSize:"14px"},children:void 0!==a&&s&&c?"1 ".concat(s.symbol," = ").concat(a.toFixed(null===o||void 0===o?void 0:o.decimals)," ").concat(c.symbol):"-"}),Object(z.jsx)(Dt,{})]})}function Dt(){var e=Rt();return Object(z.jsx)(xt.a,{variant:"popover",children:function(t){return Object(z.jsxs)("div",{style:{display:"flex"},children:[Object(z.jsx)(lt.a,Object(Y.a)(Object(Y.a)({},Object(vt.bindTrigger)(t)),{},{className:e.infoButton,children:Object(z.jsx)(Lt.a,{fontSize:"small"})})),Object(z.jsx)(dt.a,Object(Y.a)(Object(Y.a)({},Object(vt.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},disableRestoreFocus:!0,children:Object(z.jsx)(Gt,{})}))]})}})}function Gt(){var e,t,n=Ge(),r=n.fromMint,o=n.toMint,a=Ae(r,o),i=X(),c=[{ticker:null===(e=i.get(r.toString()))||void 0===e?void 0:e.symbol,mint:r},{ticker:null===(t=i.get(o.toString()))||void 0===t?void 0:t.symbol,mint:o}];return Object(z.jsxs)("div",{style:{padding:"15px",width:"250px"},children:[Object(z.jsxs)("div",{children:[Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Trade Route"}),a?a.map((function(e){return Object(z.jsx)(_t,{market:e},e.toString())})):Object(z.jsx)(Xe.a,{color:"textSecondary",children:"Route not found"})]}),Object(z.jsxs)("div",{style:{marginTop:"15px"},children:[Object(z.jsx)(Xe.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Tokens"}),c.map((function(e){return Object(z.jsxs)("div",{style:{marginTop:"5px",display:"flex",justifyContent:"space-between"},children:[Object(z.jsx)(Ct.a,{href:"https://explorer.solana.com/address/".concat(e.mint.toString()),target:"_blank",rel:"noopener",children:e.ticker}),Object(z.jsx)("code",{style:{width:"128px",overflow:"hidden"},children:e.mint.toString()})]},e.mint.toString())}))]})]})}function _t(e){var t=e.market,n=function(e){var t,n,r=X(),o=Ce(e);if(!o)return null;var a=o?null===(t=r.get(null===o||void 0===o?void 0:o.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",i=o?null===(n=r.get(null===o||void 0===o?void 0:o.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-";return"".concat(a," / ").concat(i)}(t),r=Me(t);return Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[Object(z.jsx)(Ct.a,{href:"https://dex.projectserum.com/#/market/".concat(t.toString()),target:"_blank",rel:"noopener",children:n}),Object(z.jsx)("code",{style:{marginLeft:"10px"},children:r&&r.mid?r.mid.toFixed(6):"-"})]})}var Ut=Object(x.a)((function(e){return{card:{width:e.spacing(50),borderRadius:e.spacing(2),boxShadow:"0px 0px 30px 5px rgba(0,0,0,0.075)",padding:e.spacing(2)},tab:{width:"50%"},settingsButton:{padding:0},swapButton:{width:"100%",borderRadius:e.spacing(2),backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,fontSize:16,fontWeight:700,padding:e.spacing(1.5)},swapToFromButton:{display:"block",margin:"10px auto 10px auto",cursor:"pointer"},amountInput:{fontSize:22,fontWeight:600},input:{textAlign:"right"},swapTokenFormContainer:{borderRadius:e.spacing(2),boxShadow:"0px 0px 15px 2px rgba(33,150,243,0.1)",display:"flex",justifyContent:"space-between",padding:e.spacing(1)},swapTokenSelectorContainer:{marginLeft:e.spacing(1),display:"flex",flexDirection:"column",width:"50%"},balanceContainer:{display:"flex",alignItems:"center",fontSize:"14px"},maxButton:{marginLeft:e.spacing(1),color:e.palette.primary.main,fontWeight:700,fontSize:"12px",cursor:"pointer"},tokenButton:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:e.spacing(1)}}}));function Vt(e){var t=e.containerStyle,n=e.contentStyle,r=e.swapTokenContainerStyle,o=Ut();return Object(z.jsxs)(Ve.a,{className:o.card,style:t,children:[Object(z.jsx)(Xt,{}),Object(z.jsxs)("div",{style:n,children:[Object(z.jsx)(Zt,{style:r}),Object(z.jsx)(Yt,{}),Object(z.jsx)(Jt,{style:r}),Object(z.jsx)(zt,{}),Object(z.jsx)(tn,{})]})]})}function Xt(){return Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[Object(z.jsx)(Xe.a,{style:{fontSize:18,fontWeight:700},children:"SWAP"}),Object(z.jsx)(qt,{})]})}function Yt(){var e=Ut(),t=Object(Ye.a)(),n=Ge().swapToFromMints;return Object(z.jsx)(Je.a,{className:e.swapToFromButton,fontSize:"large",htmlColor:t.palette.primary.main,onClick:n})}function Zt(e){var t=e.style,n=Ge(),r=n.fromMint,o=n.setFromMint,a=n.fromAmount,i=n.setFromAmount;return Object(z.jsx)(Qt,{from:!0,style:t,mint:r,setMint:o,amount:a,setAmount:i})}function Jt(e){var t=e.style,n=Ge(),r=n.toMint,o=n.setToMint,a=n.toAmount,i=n.setToAmount;return Object(z.jsx)(Qt,{from:!1,style:t,mint:r,setMint:o,amount:a,setAmount:i})}function Qt(e){var t=e.from,n=e.style,o=e.mint,a=e.setMint,i=e.amount,c=e.setAmount,s=Ut(),u=Object(r.useState)(!1),l=Object(m.a)(u,2),d=l[0],p=l[1],b=ve(o),f=xe(o),j=b&&f&&b.account.amount.toNumber()/Math.pow(10,f.decimals),v=f&&i?i.toLocaleString("fullwide",{maximumFractionDigits:f.decimals,useGrouping:!1}):i;return Object(z.jsxs)("div",{className:s.swapTokenFormContainer,style:n,children:[Object(z.jsxs)("div",{className:s.swapTokenSelectorContainer,children:[Object(z.jsx)(Ht,{mint:o,onClick:function(){return p(!0)}}),Object(z.jsxs)(Xe.a,{color:"textSecondary",className:s.balanceContainer,children:[b&&f?"Balance: ".concat(null===j||void 0===j?void 0:j.toFixed(f.decimals)):"-",t&&j?Object(z.jsx)("span",{className:s.maxButton,onClick:function(){return c(j)},children:"MAX"}):null]})]}),Object(z.jsx)(Ze.a,{type:"number",value:v,onChange:function(e){return c(parseFloat(e.target.value))},InputProps:{disableUnderline:!0,classes:{root:s.amountInput,input:s.input}}}),Object(z.jsx)(ct,{setMint:a,open:d,onClose:function(){return p(!1)}})]})}function Ht(e){var t=e.mint,n=e.onClick,r=Ut(),o=Object(Ye.a)();return Object(z.jsxs)("div",{onClick:n,className:r.tokenButton,children:[Object(z.jsx)($t,{mint:t,style:{width:o.spacing(4)}}),Object(z.jsx)(en,{mint:t,style:{fontSize:14,fontWeight:700}}),Object(z.jsx)(Qe.a,{})]})}function $t(e){var t=e.mint,n=e.style,r=X().get(t.toString());return Object(z.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(null===r||void 0===r?void 0:r.logoURI)?Object(z.jsx)("img",{alt:"Logo",style:n,src:null===r||void 0===r?void 0:r.logoURI}):Object(z.jsx)("div",{style:n})})}function en(e){var t=e.mint,n=e.style,r=X(),o=Object(Ye.a)(),a=r.get(t.toString());return Object(z.jsx)(Xe.a,{style:Object(Y.a)({marginLeft:o.spacing(2),marginRight:o.spacing(1)},n),children:null===a||void 0===a?void 0:a.symbol})}function tn(){var e=Ut(),t=Ge(),n=t.fromMint,r=t.toMint,o=t.fromAmount,a=t.slippage,i=t.isClosingNewAccounts,c=t.isStrict,l=ke().swapClient,d=xe(n),p=xe(r),b=Se(),f=Te(n,r),j=Ce(f&&f.markets?f.markets[0]:void 0),m=Ce(f&&f.markets?f.markets[1]:void 0),v=function(){var e,t,n,r,o=Ge(),a=o.fromMint,i=o.toMint,c=o.fromAmount,s=o.toAmount,u=ke().swapClient,l=V(),d=l.wormholeMap,p=l.solletMap,b=Te(a,i);return null!==b&&!1===a.equals(i)&&null!==u.program.provider.wallet.publicKey&&c>0&&s>0&&null!==b&&("wormhole-native"!==b.kind||void 0!==(null===(e=d.get(a.toString()))||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.includes(_)))&&("wormhole-sollet"!==b.kind||void 0!==(null===(n=p.get(a.toString()))||void 0===n||null===(r=n.tags)||void 0===r?void 0:r.includes(G)))}(),x=function(e){var t=Ge().referral,n=Object(T.a)(Object(u.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",void 0);case 2:if(e){n.next=4;break}return n.abrupt("return",void 0);case 4:if(e.quoteMintAddress.equals(E)||e.quoteMintAddress.equals(N)){n.next=6;break}return n.abrupt("return",void 0);case 6:return n.abrupt("return",P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,e.quoteMintAddress,t));case 7:case"end":return n.stop()}}),n)}))),[e]);if(n.result)return n.result}(j),g=_e(),w=ve(n),y=ve(r),k=xe(j&&j.quoteMintAddress),S=function(){var e=Object(u.a)(s.a.mark((function e(){var t,u,f,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&p){e.next=2;break}throw new Error("Unable to calculate mint decimals");case 2:if(g){e.next=4;break}throw new Error("Invalid fair");case 4:if(k){e.next=6;break}throw new Error("Quote mint not found");case 6:return t=new O.BN(o*Math.pow(10,d.decimals)),u={rate:new O.BN(Math.pow(10,p.decimals)*Oe/g).muln(100-a).divn(100),fromDecimals:d.decimals,quoteDecimals:k.decimals,strict:c},f=j?b.get(null===j||void 0===j?void 0:j.address.toString()):void 0,v=m?b.get(null===m||void 0===m?void 0:m.address.toString()):void 0,e.next=12,l.swap({fromMint:n,toMint:r,fromWallet:w?w.publicKey:void 0,toWallet:y?y.publicKey:void 0,amount:t,minExchangeRate:u,referral:x,fromMarket:j,toMarket:m,fromOpenOrders:f?f[0].address:void 0,toOpenOrders:v?v[0].address:void 0,close:i});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsx)(h.a,{variant:"contained",className:e.swapButton,onClick:S,disabled:!v,children:"Swap"})}function nn(e){var t=e.containerStyle,n=e.contentStyle,r=e.swapTokenContainerStyle,o=e.materialTheme,a=e.provider,i=e.tokenList,c=e.fromMint,s=e.toMint,u=e.fromAmount,l=e.toAmount,d=e.referral,p=new S.Swap(a,i),b=Object(C.a)(o||{palette:{primary:{main:"#2196F3",contrastText:"#FFFFFF"},secondary:{main:"#E0E0E0",light:"#595959"},error:{main:"#ff6b6b"}}});return Object(z.jsx)(M.a,{theme:b,children:Object(z.jsx)(U,{tokenList:i,children:Object(z.jsx)(je,{provider:a,children:Object(z.jsx)(ye,{swapClient:p,children:Object(z.jsx)(De,{fromMint:c,toMint:s,fromAmount:u,toAmount:l,referral:d,children:Object(z.jsx)(Vt,{containerStyle:t,contentStyle:n,swapTokenContainerStyle:r})})})})})})}n(371);var rn=Object(x.a)((function(e){return{root:{minHeight:"100vh",paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));function on(){var e=rn(),t=Object(v.b)().enqueueSnackbar,n=Object(r.useState)(!1),o=Object(m.a)(n,2),a=o[0],i=o[1],c=Object(r.useState)(null),s=Object(m.a)(c,2),u=s[0],l=s[1],d=Object(r.useMemo)((function(){var e={preflightCommitment:"recent",commitment:"recent"},n="https://solana-api.projectserum.com",r=new w.a("https://www.sollet.io",n),o=new y.Connection(n,e.preflightCommitment);return[new an(o,r,e,(function(e,n){n?t("Error: ".concat(n.toString()),{variant:"error"}):t("Transaction sent",{variant:"success",action:Object(z.jsx)(h.a,{color:"inherit",component:"a",target:"_blank",rel:"noopener",href:"https://explorer.solana.com/tx/".concat(e),children:"View on Solana Explorer"})})})),r]}),[t]),p=Object(m.a)(d,2),b=p[0],f=p[1];return Object(r.useEffect)((function(){(new k.a).resolve().then(l)}),[l]),Object(r.useEffect)((function(){f.on("connect",(function(){t("Wallet connected",{variant:"success"}),i(!0)})),f.on("disconnect",(function(){t("Wallet disconnected",{variant:"info"}),i(!1)}))}),[f,t]),Object(z.jsxs)(g.a,{container:!0,justify:"center",alignItems:"center",className:e.root,children:[Object(z.jsx)(h.a,{variant:"outlined",onClick:function(){return a?f.disconnect():f.connect()},style:{position:"fixed",right:24,top:24},children:a?"Disconnect":"Connect"}),u&&Object(z.jsx)(nn,{provider:b,tokenList:u})]})}var an=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e,r,o,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,r,o)).onTransaction=void 0,i.onTransaction=a,i}return Object(d.a)(n,[{key:"send",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r,o){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)(Object(b.a)(n.prototype),"send",this).call(this,t,r,o);case 3:return a=e.sent,this.onTransaction(a),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),this.onTransaction(void 0,e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"sendAll",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r){var o,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)(Object(b.a)(n.prototype),"sendAll",this).call(this,t,r);case 3:return(o=e.sent).forEach((function(e){a.onTransaction(e)})),e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(0),this.onTransaction(void 0,e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(O.Provider),cn=function(){return Object(z.jsx)(v.a,{maxSnack:5,autoHideDuration:8e3,children:Object(z.jsx)(on,{})})},sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,448)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(z.jsx)(o.a.StrictMode,{children:Object(z.jsx)(cn,{})}),document.getElementById("root")),sn()}},[[372,1,2]]]);
//# sourceMappingURL=main.b985dff6.chunk.js.map